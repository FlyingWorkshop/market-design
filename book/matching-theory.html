
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Matching Theory &#8212; Market Design</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://FlyingWorkshop.github.io/market-design/book/matching-theory.html" />
    <link rel="shortcut icon" href="../_static/fav.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Game Theory Review + Incentives" href="game-theory-review-and-incentives.html" />
    <link rel="prev" title="Market Design" href="../intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Market Design</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Matching Theory
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Matching Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="game-theory-review-and-incentives.html">
   Game Theory Review + Incentives
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stability-and-order.html">
   Stability + Order
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="house-allocation.html">
   Housing Allocation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="school-choice.html">
   School Choice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="matching-with-contracts.html">
   Matching with Contracts
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Auction Theory
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="auction-theory.html">
   Auction Theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="multi-unit-auctions-with-matching.html">
   Multi-Unit Auctions with Matching
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sponsored-search-auctions.html">
   Sponsored Search Auctions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="chilean-fisheries.html">
   Chilean Fisheries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="radio-spectrum-auctions.html">
   Radio Spectrum Auctions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="incentive-reverse-auction.html">
   Incentive Reverse Auction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="practice.html">
   Practice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/FlyingWorkshop/market-design"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/FlyingWorkshop/market-design/issues/new?title=Issue%20on%20page%20%2Fbook/matching-theory.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/FlyingWorkshop/market-design/edit/master/book/matching-theory.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/book/matching-theory.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#two-sided-matching">
   Two-Sided Matching
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#problem-statement">
     Problem Statement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sample-applications">
     Sample Applications
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#marriage-model">
   Marriage Model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#participants-of-two-kinds">
     Participants of Two Kinds
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#question">
       Question
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#challenge-question">
       Challenge Question
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deferred-acceptance-algorithm">
   Deferred Acceptance Algorithm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#algorithm">
     Algorithm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#existence">
     Existence
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optimality">
   Optimality
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#better-than-optimal-matchings">
     Better-than-Optimal Matchings
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rural-hospitals-theorem">
   Rural Hospitals Theorem
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Matching Theory</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#two-sided-matching">
   Two-Sided Matching
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#problem-statement">
     Problem Statement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sample-applications">
     Sample Applications
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#marriage-model">
   Marriage Model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#participants-of-two-kinds">
     Participants of Two Kinds
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#question">
       Question
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#challenge-question">
       Challenge Question
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deferred-acceptance-algorithm">
   Deferred Acceptance Algorithm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#algorithm">
     Algorithm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#existence">
     Existence
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optimality">
   Optimality
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#better-than-optimal-matchings">
     Better-than-Optimal Matchings
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rural-hospitals-theorem">
   Rural Hospitals Theorem
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="matching-theory">
<h1>Matching Theory<a class="headerlink" href="#matching-theory" title="Permalink to this headline">#</a></h1>
<section id="two-sided-matching">
<h2>Two-Sided Matching<a class="headerlink" href="#two-sided-matching" title="Permalink to this headline">#</a></h2>
<section id="problem-statement">
<h3>Problem Statement<a class="headerlink" href="#problem-statement" title="Permalink to this headline">#</a></h3>
<p>Two different kinds of parties to be matched. Participants of both kinds care about to whom they are matched. Money and prices can’t be used to guide the match.</p>
</section>
<section id="sample-applications">
<h3>Sample Applications<a class="headerlink" href="#sample-applications" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>School assignment</p></li>
<li><p>College admissions</p></li>
<li><p>Medical residencies</p></li>
<li><p>Heterosexual marriage &amp; dating markets</p></li>
<li><p>Judicial clerkships</p></li>
<li><p>Frat/Sorority “rush”</p></li>
<li><p>Job assignment in firms</p></li>
<li><p>Military postings</p></li>
</ul>
</section>
</section>
<section id="marriage-model">
<h2>Marriage Model<a class="headerlink" href="#marriage-model" title="Permalink to this headline">#</a></h2>
<section id="participants-of-two-kinds">
<h3>Participants of Two Kinds<a class="headerlink" href="#participants-of-two-kinds" title="Permalink to this headline">#</a></h3>
<p>A set of men <span class="math notranslate nohighlight">\(M\)</span> and women <span class="math notranslate nohighlight">\(W\)</span>.
A set of men <span class="math notranslate nohighlight">\(M\)</span> with typical man <span class="math notranslate nohighlight">\(m \in M\)</span> and a set of women <span class="math notranslate nohighlight">\(W\)</span> with typical woman <span class="math notranslate nohighlight">\(w \in W\)</span>. We assume one-to-one matching. Each man can be matched to one woman or remained unmatched and vice versa. People have strict preferences over their potential partner. A man <span class="math notranslate nohighlight">\(m\)</span> is “acceptable” to a woman <span class="math notranslate nohighlight">\(w\)</span> is she prefers him to being unmatched. We define an “acceptable” woman similarly.</p>
<dl class="simple myst">
<dt>Matching</dt><dd><p>A matching is a set of pairs of the form <span class="math notranslate nohighlight">\((m, w)\)</span> or self-matching <span class="math notranslate nohighlight">\((m,m)\)</span> or <span class="math notranslate nohighlight">\((w, w)\)</span> such that each individual appears in exactly one pair.</p>
</dd>
</dl>
<div class="admonition-notation admonition">
<p class="admonition-title">Notation</p>
<p>If the match includes <span class="math notranslate nohighlight">\((m, m)\)</span> then <span class="math notranslate nohighlight">\(m\)</span> is unmatched. Similarly, <span class="math notranslate nohighlight">\((w, w)\)</span> means <span class="math notranslate nohighlight">\(w\)</span> is unmatched.</p>
</div>
<dl class="simple myst">
<dt>Blocking Pair</dt><dd><p>Given a matching <span class="math notranslate nohighlight">\(\mu\)</span>, a blocking pair <span class="math notranslate nohighlight">\((m, w)\)</span> is a man <span class="math notranslate nohighlight">\(m\)</span> and a woman <span class="math notranslate nohighlight">\(w\)</span> who would both prefer to match with each other rather than to their assigned partners in that matching.</p>
</dd>
<dt>Unstable Matching</dt><dd><p>A matching is unstable if either:</p>
</dd>
</dl>
<ol class="simple">
<li><p>Some individual is matched to an unacceptable partner, or</p></li>
<li><p>There is blocking pair <span class="math notranslate nohighlight">\((m, w)\)</span> – that is, a man <span class="math notranslate nohighlight">\(m\)</span> and a woman <span class="math notranslate nohighlight">\(w\)</span> who would both prefer to match with each other rather than to their assigned partners.</p></li>
</ol>
<dl class="simple myst">
<dt>Stable Matching</dt><dd><p>If a matching is not unstable, it is stable.</p>
</dd>
</dl>
<section id="question">
<h4>Question<a class="headerlink" href="#question" title="Permalink to this headline">#</a></h4>
<p>There are two men <span class="math notranslate nohighlight">\(m, m'\)</span> and two women <span class="math notranslate nohighlight">\(w, w'\)</span>.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(m\)</span> prefers <span class="math notranslate nohighlight">\(w\)</span> to <span class="math notranslate nohighlight">\(w'\)</span> to <span class="math notranslate nohighlight">\(m\)</span> (<span class="math notranslate nohighlight">\(s \succ_m w' \succ_m m\)</span>)</p></li>
<li><p><span class="math notranslate nohighlight">\(m'\)</span> prefers <span class="math notranslate nohighlight">\(w'\)</span> to <span class="math notranslate nohighlight">\(w\)</span> to <span class="math notranslate nohighlight">\(m'\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(w\)</span> prefers <span class="math notranslate nohighlight">\(m\)</span> to <span class="math notranslate nohighlight">\(m'\)</span> to <span class="math notranslate nohighlight">\(w\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(w'\)</span> prefers <span class="math notranslate nohighlight">\(m'\)</span> to <span class="math notranslate nohighlight">\(m\)</span> to <span class="math notranslate nohighlight">\(w'\)</span></p></li>
</ul>
<p>How many matchings are possible? Which are stable and which are unstable? Why?</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Solution<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">There are three possible matchings:
<span class="math notranslate nohighlight">\(\{(m, w), (m', w')\}\)</span>, <span class="math notranslate nohighlight">\(\{(m, w'), (m', w)\}\)</span>, and <span class="math notranslate nohighlight">\(\{(m, m), (m', m'), (w, w), (w', w')\}\)</span>. Clearly, the last matching is unstable because everyone perfers matching to <em>someone</em> over <em>no one</em>. The second matching is also unstable because <span class="math notranslate nohighlight">\(w\)</span> and <span class="math notranslate nohighlight">\(m\)</span> both prefer each other over their current partners. The first matching is thus the unique stable matching. In general, we will see that stable matchings are neither unique nor equally preferable for all agents.</p>
</div>
</details><div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Get more practice <a class="reference external" href="https://colab.research.google.com/drive/1ca7I3ArNiOGom9U0re6zPYyIi781W65V?usp=sharing">here</a>!</p>
</div>
</section>
<section id="challenge-question">
<h4>Challenge Question<a class="headerlink" href="#challenge-question" title="Permalink to this headline">#</a></h4>
<p>If we have <span class="math notranslate nohighlight">\(|M| = |W| = n\)</span>, how many matchings are possible? What about when <span class="math notranslate nohighlight">\(|M| \neq |W|\)</span>? How does this change if we no longer assume strict preferences? How do we define “blocking pairs” if we give up strict preferences?</p>
</section>
</section>
</section>
<section id="deferred-acceptance-algorithm">
<h2>Deferred Acceptance Algorithm<a class="headerlink" href="#deferred-acceptance-algorithm" title="Permalink to this headline">#</a></h2>
<section id="algorithm">
<h3>Algorithm<a class="headerlink" href="#algorithm" title="Permalink to this headline">#</a></h3>
<div class="proof algorithm admonition" id="algorithm-0">
<p class="admonition-title"><span class="caption-number">Algorithm 1 </span> (Deferred Acceptance Algorithm)</p>
<section class="algorithm-content" id="proof-content">
<ol class="simple">
<li><p>Men and women rank all potential partners.</p></li>
<li><p>Each man proposes to the highest-ranked acceptable woman on his list, or to nobody if no one on the list is acceptable.</p></li>
<li><p>Each woman holds only her most preferred acceptable proposal and rejects all others.</p></li>
<li><p>Each <span class="math notranslate nohighlight">\(m\)</span> who is rejected by a woman removes her from his list.</p></li>
<li><p>If no man is rejected, then each woman “accepts” her offer and is matched to the man whose proposal she holds.</p></li>
</ol>
</section>
</div><p>This is the <em>“man-proposing”</em> deferred acceptance algorithm; there is also a <em>“woman-proposing”</em> version.</p>
</section>
<section id="existence">
<h3>Existence<a class="headerlink" href="#existence" title="Permalink to this headline">#</a></h3>
<div class="proof theorem admonition" id="theorem-1">
<p class="admonition-title"><span class="caption-number">Theorem 1 </span> (Stable Matchings Exist)</p>
<section class="theorem-content" id="proof-content">
<p>The deferred acceptance algorithm ends in finite time with a stable matching. (In particular, a stable matching exists).</p>
</section>
</div><div class="proof admonition" id="proof">
<p>Proof. The algorithm must end in a finite number of rounds. Suppose <span class="math notranslate nohighlight">\(m\)</span> and <span class="math notranslate nohighlight">\(w\)</span> are matched. Each must be acceptable to the other. (Why?) There is no blocking pair <span class="math notranslate nohighlight">\((m, w')\)</span> because if <span class="math notranslate nohighlight">\(m\)</span> prefers <span class="math notranslate nohighlight">\(w'\)</span> to <span class="math notranslate nohighlight">\(w\)</span>, then (1) at some time, <span class="math notranslate nohighlight">\(m\)</span> <em>had</em>
proposed to <span class="math notranslate nohighlight">\(w'\)</span> and she eventually rejected him. Either <span class="math notranslate nohighlight">\(m\)</span> is unacceptable to <span class="math notranslate nohighlight">\(w'\)</span> or she then held a man she preferred to <span class="math notranslate nohighlight">\(m\)</span>. At every later round, <span class="math notranslate nohighlight">\(w'\)</span> held the same man or some more preferred one, so <span class="math notranslate nohighlight">\(w'\)</span> prefers her final match to <span class="math notranslate nohighlight">\(m\)</span>. Therefore, there are <em>NO BLOCKING PAIRS</em>. <span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
</div>
</section>
</section>
<section id="optimality">
<h2>Optimality<a class="headerlink" href="#optimality" title="Permalink to this headline">#</a></h2>
<dl class="simple myst">
<dt>Man-Optimal</dt><dd><p>A stable matching is <em>man-optimal</em> if every man prefers his partner to any partner he could possibly have in any stable matching.</p>
</dd>
</dl>
<div class="proof theorem admonition" id="theorem-2">
<p class="admonition-title"><span class="caption-number">Theorem 2 </span></p>
<section class="theorem-content" id="proof-content">
<p>The man-proposing DA algorithm produces the man-optimal stable matching.</p>
</section>
</div><div class="proof admonition" id="proof">
<p>Proof. We say that <span class="math notranslate nohighlight">\(w\)</span> is <em>possible</em> for <span class="math notranslate nohighlight">\(m\)</span> if <span class="math notranslate nohighlight">\((m, w)\)</span> is in some stable matching. Show <em>by induction</em> that no man is ever rejected by a woman who is possible for him. True at round 0. Suppose this is the case through round <span class="math notranslate nohighlight">\(n\)</span> of the algorithm. Suppose at round <span class="math notranslate nohighlight">\(n+1\)</span>, woman <span class="math notranslate nohighlight">\(w\)</span> rejects <span class="math notranslate nohighlight">\(m\)</span> in favor of <span class="math notranslate nohighlight">\(m'\)</span>. Note, this means <span class="math notranslate nohighlight">\(m'\)</span> made an offer to <span class="math notranslate nohighlight">\(w\)</span> in round <span class="math notranslate nohighlight">\(n+1\)</span> and hence all the women whom <span class="math notranslate nohighlight">\(m'\)</span> prefers to <span class="math notranslate nohighlight">\(w\)</span> have rejected him and so, by the inductive hypothesis, must be impossible for him. We claim that <span class="math notranslate nohighlight">\(w\)</span> must be <em>impossible</em> for <span class="math notranslate nohighlight">\(m\)</span>. Suppose to the contrary that <span class="math notranslate nohighlight">\(w\)</span> is possible for <span class="math notranslate nohighlight">\(m\)</span> and consider the stable matching <span class="math notranslate nohighlight">\(X\)</span> that includes <span class="math notranslate nohighlight">\((m, w)\)</span> and <span class="math notranslate nohighlight">\((m', w')\)</span> for some <span class="math notranslate nohighlight">\(w'\)</span>. By the inductive hypothesis, <span class="math notranslate nohighlight">\(m'\)</span> must prefer <span class="math notranslate nohighlight">\(w\)</span> to <span class="math notranslate nohighlight">\(w'\)</span>. But then <span class="math notranslate nohighlight">\((m', w)\)</span> blocks <span class="math notranslate nohighlight">\(X\)</span>, so <span class="math notranslate nohighlight">\(X\)</span> is not stable. So in no round of the man-proposing DA is any man rejected by a possible woman. <span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
</div>
<dl class="simple myst">
<dt>Pessimal Stable Matchings</dt><dd><p>A stable matching <span class="math notranslate nohighlight">\(X\)</span> is <em>woman-pessimal</em> if every woman prefers her partner at every other stable matching to her partner at <span class="math notranslate nohighlight">\(X\)</span>.</p>
</dd>
</dl>
<div class="proof theorem admonition" id="theorem-3">
<p class="admonition-title"><span class="caption-number">Theorem 3 </span></p>
<section class="theorem-content" id="proof-content">
<p>The man-proposing DA produces the woman-pessimal stable matching.</p>
</section>
</div><div class="proof admonition" id="proof">
<p>Proof. We have already shown that the outcome <span class="math notranslate nohighlight">\(X\)</span> of the man-offering algorithm is a man-optimal stable matching. We must show that any other matching <span class="math notranslate nohighlight">\(X'\)</span> is better for all the women whose partners have changed.Suppose that woman <span class="math notranslate nohighlight">\(w\)</span> is matched to <span class="math notranslate nohighlight">\(m\)</span> at <span class="math notranslate nohighlight">\(X\)</span> and to a different man <span class="math notranslate nohighlight">\(m' \neq m\)</span> at another stable matching <span class="math notranslate nohighlight">\(X'\)</span>. Suppose <span class="math notranslate nohighlight">\(m\)</span> is matched to woman <span class="math notranslate nohighlight">\(w'\)</span> in the matching <span class="math notranslate nohighlight">\(X'\)</span>. Since <span class="math notranslate nohighlight">\(X\)</span> is man-optimal, <span class="math notranslate nohighlight">\(m\)</span> prefers <span class="math notranslate nohighlight">\(w\)</span> to <span class="math notranslate nohighlight">\(w'\)</span>. But since <span class="math notranslate nohighlight">\(X'\)</span> is stable, it is not blocked by <span class="math notranslate nohighlight">\((m, w)\)</span>, so <span class="math notranslate nohighlight">\(w\)</span> must prefer <span class="math notranslate nohighlight">\(m'\)</span> to <span class="math notranslate nohighlight">\(m\)</span>. <span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
</div>
<section id="better-than-optimal-matchings">
<h3>Better-than-Optimal Matchings<a class="headerlink" href="#better-than-optimal-matchings" title="Permalink to this headline">#</a></h3>
<p>The man-optimal stable matching is best for men <em>among stable matchings</em>, but there may be unstable matchings that all men weakly prefer and some strictly prefer.</p>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h4>
<p>Say we have three men and two women.</p>
<p>Man Preferences:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(m_1: w_1 \succ w_2\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(m_2: w_2 \succ w_1\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(m_3: w_1 \succ w_2\)</span></p></li>
</ul>
<p>Woman Preferences:
<span class="math notranslate nohighlight">\(w_1: m_2 \succ m_3 \succ m_1\)</span>
<span class="math notranslate nohighlight">\(w_2: m_1 \succ m_3 \succ m_2\)</span></p>
<p>What is the unique stable matching? Are there any matchings that all men weakly prefer?</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Solution<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The unique stable matching is <span class="math notranslate nohighlight">\(\{(m_1, w_2), (m_2, w_2), (m_3, w_3)\}\)</span>, but <em>men</em> would be better off if <span class="math notranslate nohighlight">\(m_1\)</span> and <span class="math notranslate nohighlight">\(m_2\)</span> could swap partners.</p>
</div>
</details><div class="admonition-lesson admonition">
<p class="admonition-title">Lesson</p>
<p>Stability respects women’s preferences as well as men’s. The distinction will be important when we discuss school choice if we want to prioritize student preferences over school’s preferences.</p>
</div>
</section>
</section>
</section>
<section id="rural-hospitals-theorem">
<h2>Rural Hospitals Theorem<a class="headerlink" href="#rural-hospitals-theorem" title="Permalink to this headline">#</a></h2>
<p>Why “rural hospitals?” Deferred acceptance is used to assign doctors to hospitals—some hospitals wondered if changing the algorithm would help them fill positions.</p>
<div class="proof theorem admonition" id="theorem-4">
<p class="admonition-title"><span class="caption-number">Theorem 4 </span> (Rural Hospitals Theorem)</p>
<section class="theorem-content" id="proof-content">
<p>The sets of men and women who are unmatched is the same in <em>all</em> stable matchings.</p>
</section>
</div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This does not mean that the matchings are the same, just that the sets of men and women who are matched or unmatched is the same across all stable matchings.</p>
</div>
<div class="proof admonition" id="proof">
<p>Proof. Let <span class="math notranslate nohighlight">\(M, W\)</span> be the <em>sets</em> of men and women matched in the man-optimal stable matching (which is also woman-pessimal). Let <span class="math notranslate nohighlight">\(M', W'\)</span> be the <em>sets</em> of men and women matched in some other stable matching. We seek to show that <span class="math notranslate nohighlight">\(M = M'\)</span> and</p>
<p><span class="math notranslate nohighlight">\(W = W'\)</span>. Any man in <span class="math notranslate nohighlight">\(M'\)</span> must also be matched in the man-optimal stable matching, so <span class="math notranslate nohighlight">\(M' \subseteq M\)</span> <span class="math notranslate nohighlight">\(\ldots\)</span> and also <span class="math notranslate nohighlight">\(|M'| \leq |M|\)</span>.  Similarly, since any woman in <span class="math notranslate nohighlight">\(W\)</span> is no worse off in the alternative matching, <span class="math notranslate nohighlight">\(W \subseteq W'\)</span> <span class="math notranslate nohighlight">\(\ldots\)</span> and also <span class="math notranslate nohighlight">\(|W| \leq |W'|\)</span>. In any feasible matching, the number of matched men equals the number of matched women, so <span class="math notranslate nohighlight">\(|M| = |W|\)</span> and <span class="math notranslate nohighlight">\(|M'| = |W'|\)</span>. We have: <span class="math notranslate nohighlight">\(\left|M'\right|\le\left|M\right|=\left|W\right|\le\left|W'\right|=\left|M'\right|\)</span>, so all these are equal. Adding the set inclusions, we must have some <span class="math notranslate nohighlight">\(M=M'\)</span> and <span class="math notranslate nohighlight">\(W=W'\)</span>. <span class="math notranslate nohighlight">\(\blacksquare\)</span></p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./book"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Market Design</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="game-theory-review-and-incentives.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Game Theory Review + Incentives</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Logan Mondal Bhamidipaty and Paul Milgrom<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>